<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Facture Proforma - {{ reservation.nom }}</title>
    <style>
        /* ---------- PARAMÈTRES GÉNÉRAUX PDF A4 ---------- */
        @page {
            size: A4;
            margin: 20mm;
        }

        body {
            font-family: 'DejaVu Sans', sans-serif;
            font-size: 12px;
            line-height: 1.5;
            color: #333;
            background: #fff;
            margin: 0;
            padding: 0;
        }

        .container {
            width: 100%;
            padding: 0 15px;
        }

        /* ---------- EN-TÊTE ---------- */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 3px solid #f2b705;
            padding-bottom: 10px;
            margin-bottom: 25px;
        }

        header img {
            height: 60px;
        }

        header h1 {
            font-size: 22px;
            color: #2a7d2e;
            margin: 0;
            text-transform: uppercase;
        }

        header p {
            margin: 2px 0;
        }

        /* ---------- INFORMATIONS CLIENT ---------- */
        .info {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            margin-bottom: 25px;
        }

        .info div {
            width: 48%;
        }

        h2 {
            font-size: 15px;
            color: #2a7d2e;
            border-bottom: 2px solid #f2b705;
            padding-bottom: 5px;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        p {
            margin: 4px 0;
        }

        /* ---------- TABLEAU ---------- */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            font-size: 12px;
        }

        table th, table td {
            border: 1px solid #ccc;
            padding: 8px;
        }

        table th {
            background: #f2b705;
            color: #fff;
            text-align: left;
        }

        table td {
            background: #fff;
        }

        /* ---------- TOTAL ---------- */
        .total {
            text-align: right;
            margin-top: 20px;
        }

        .total strong {
            font-size: 14px;
            color: #2a7d2e;
        }

        .highlight {
            color: #f2b705;
        }

        /* ---------- COMMENTAIRE ---------- */
        .commentaire {
            margin-top: 25px;
            background: #fafafa;
            border-left: 4px solid #f2b705;
            padding: 10px 15px;
        }

        /* ---------- PIED DE PAGE ---------- */
        footer {
            position: fixed;
            bottom: 10mm;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 10px;
            color: #555;
            border-top: 1px solid #ccc;
            padding-top: 5px;
        }
    </style>
</head>

<body>
<div class="container">
    <header>
        <div>
            <img src="{{ asset('media/logo.jpeg') }}" alt="Logo Ninajia">
        </div>
        <div style="text-align:right;">
            <h1>Facture Proforma</h1>
            <p>Date : {{ "now"|date("d/m/Y") }}</p>
            <p>Réf : RF-{{ "now"|date("YmdHis") }}</p>
        </div>
    </header>

    <div class="info">
        <div>
            <h2>Informations du client</h2>
            <p><strong>Nom :</strong> {{ reservation.nom ?: 'N/A' }}</p>
            <p><strong>Email :</strong> {{ reservation.email ?: 'N/A' }}</p>
            <p><strong>Téléphone :</strong> {{ reservation.telephone ?: 'N/A' }}</p>
            <p><strong>Pays de résidence :</strong> {{ reservation.paysresidence ?: 'N/A' }}</p>
        </div>
        <div>
            <h2>Détails du voyage</h2>
            <p><strong>Destination :</strong> {{ reservation.destination ?: 'N/A' }}</p>
            <p><strong>Date de départ :</strong> {{ reservation.datedepart ? reservation.datedepart|date('d/m/Y') : 'N/A' }}</p>
            <p><strong>Type de voyage :</strong> {{ reservation.typevoyage|capitalize ?: 'N/A' }}</p>
            <p><strong>Nombre de voyageurs :</strong> {{ reservation.nbrvoyageurs ?: 'N/A' }}</p>
        </div>
    </div>

    <h2>Détail du budget estimé</h2>
    <table>
        <thead>
        <tr>
            <th>Description</th>
            <th>Quantité</th>
            <th>Prix unitaire (€)</th>
            <th>Total (€)</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>Forfait voyage {{ reservation.typevoyage|default('standard')|capitalize }}</td>
            <td>{{ reservation.nbrvoyageurs ?: '1' }}</td>
            <td>{{ reservation.budgetestime|default(0)|number_format(2, ',', ' ') }}</td>
            <td>{{ reservation.budgetestime|default(0)|number_format(2, ',', ' ') }}</td>
        </tr>
        </tbody>
    </table>

    <div class="total">
        <p><strong>Total estimé : <span class="highlight">{{ reservation.budgetestime|default(0)|number_format(2, ',', ' ') }} €</span></strong></p>
    </div>

    {% if reservation.commentaire %}
        <div class="commentaire">
            <h2>Commentaire du client</h2>
            <p>{{ reservation.commentaire }}</p>
        </div>
    {% endif %}
</div>

<footer>
    Ninajia ✈️ — Voyages & Aventures Authentiques  
    | Email : contact@ninajia.com | Tel : (+229) 01 46 10 10 50 / (+234) 707 047 7730  
    | Cette facture proforma n’est pas un document comptable officiel.
</footer>

</body>
</html>
